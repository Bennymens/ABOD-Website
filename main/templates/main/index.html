{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {% if page_title %}
  <title>{{ page_title }} — ABOD</title>
  {% else %}
  <title>Home — ABOD</title>
  {% endif %}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/static/main/style.css" />
    <style>
      .mobile-controls {
        display: none;
      }
      @media (max-width: 768px) {
        .navbar {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .navbar-left-group {
          display: flex;
          align-items: center;
          gap: 10px;
        }
        .navbar-center, .navbar-right {
          display: none;
        }
        .mobile-controls {
          display: flex;
          align-items: center;
          gap: 10px;
          margin-left: auto;
        }
        .hamburger {
          display: flex;
          position: static !important;
          margin-left: 0;
        }
        .mobile-language {
          position: relative;
        }
        .mobile-language .icon-link {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 30px;
          height: 30px;
          border-radius: 50%;
          background-color: #f0f0f0;
          transition: background-color 0.2s;
        }
        .mobile-language .icon-link:hover {
          background-color: #e0e0e0;
        }
        .mobile-language .icon-link svg {
          width: 18px;
          height: 18px;
          stroke: #333;
        }
        .our-work-section {
          margin-top: 20px;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-left-group">
        <div class="navbar-section navbar-logo" style="display: flex; align-items: center; gap: 18px">
          <a href="{% url 'home' %}">
            <img src="{% static 'main/img/logo.jpg' %}" alt="Company Logo" style="height: 40px" />
          </a>
        </div>
        <ul class="navbar-section navbar-center">
          <li><a href="{% url 'markets' %}" {% if request.resolver_match.url_name == 'markets' %}class="active"{% endif %}>{% trans "Markets" %}</a></li>
          <li><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>{% trans "Services" %}</a></li>
          <li><a href="{% url 'projects' %}" {% if request.resolver_match.url_name == 'projects' %}class="active"{% endif %}>{% trans "Projects" %}</a></li>
          <li><a href="{% url 'insights' %}" {% if request.resolver_match.url_name == 'insights' %}class="active"{% endif %}>{% trans "Insights" %}</a></li>
        </ul>
      </div>
      <ul class="navbar-section navbar-right">
        <li><a href="{% url 'about' %}" {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>{% trans "About" %}</a></li>
        <li><a href="{% url 'careers' %}" {% if request.resolver_match.url_name == 'careers' %}class="active"{% endif %}>{% trans "Careers" %}</a></li>
        <li><a href="{% url 'news' %}" {% if request.resolver_match.url_name == 'news' %}class="active"{% endif %}>{% trans "News" %}</a></li>
        <li><a href="{% url 'contact' %}" {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>{% trans "Contact" %}</a></li>
        <li class="language-dropdown">
          <a href="#" title="Language" class="icon-link" id="lang-toggle">
            <!-- Globe SVG icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="10" stroke="#333" stroke-width="2" />
              <ellipse
                cx="12"
                cy="12"
                rx="4"
                ry="10"
                stroke="#333"
                stroke-width="2"
              />
              <line
                x1="2"
                y1="12"
                x2="22"
                y2="12"
                stroke="#333"
                stroke-width="2"
              />
            </svg>
          </a>
          <ul class="lang-menu" id="lang-menu">
            <li>
              <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                <input name="language" type="hidden" value="en" />
                <button type="submit" style="background: none; border: none; cursor: pointer; padding: 8px 16px; width: 100%; text-align: left; font-family: inherit; font-size: inherit; color: inherit;">English</button>
              </form>
            </li>
            <li>
              <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                <input name="language" type="hidden" value="fr" />
                <button type="submit" style="background: none; border: none; cursor: pointer; padding: 8px 16px; width: 100%; text-align: left; font-family: inherit; font-size: inherit; color: inherit;">Français</button>
              </form>
            </li>
            <li>
              <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                <input name="language" type="hidden" value="de" />
                <button type="submit" style="background: none; border: none; cursor: pointer; padding: 8px 16px; width: 100%; text-align: left; font-family: inherit; font-size: inherit; color: inherit;">Deutsch</button>
              </form>
            </li>
          </ul>
        </li>
        <li>
          <a href="#" title="Search" class="icon-link">
            <!-- Magnifying glass SVG icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle cx="11" cy="11" r="7" stroke="#333" stroke-width="2" />
              <line
                x1="16.5"
                y1="16.5"
                x2="21"
                y2="21"
                stroke="#333"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </a>
        </li>
      </ul>
      <!-- Hamburger menu for mobile -->
      <div class="mobile-controls">
        <div class="mobile-language">
          <a href="#" class="icon-link" id="mobile-menu-lang-toggle">
            <!-- Globe SVG icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <ellipse cx="12" cy="12" rx="4" ry="10" stroke="currentColor" stroke-width="2"/>
              <line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2"/>
            </svg>
          </a>
          <ul class="lang-menu" id="mobile-menu-lang-menu">
            <li>
              <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                <input name="language" type="hidden" value="en" />
                <button type="submit" style="background: none; border: none; cursor: pointer; padding: 8px 16px; width: 100%; text-align: left; font-family: inherit; font-size: inherit; color: inherit;">English</button>
              </form>
            </li>
            <li>
              <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                <input name="language" type="hidden" value="fr" />
                <button type="submit" style="background: none; border: none; cursor: pointer; padding: 8px 16px; width: 100%; text-align: left; font-family: inherit; font-size: inherit; color: inherit;">Français</button>
              </form>
            </li>
            <li>
              <form action="{% url 'set_language' %}" method="post" style="margin: 0;">
                {% csrf_token %}
                <input name="next" type="hidden" value="{{ request.get_full_path }}" />
                <input name="language" type="hidden" value="de" />
                <button type="submit" style="background: none; border: none; cursor: pointer; padding: 8px 16px; width: 100%; text-align: left; font-family: inherit; font-size: inherit; color: inherit;">Deutsch</button>
              </form>
            </li>
          </ul>
        </div>
        <div class="hamburger" id="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <!-- Mobile menu -->
    <div class="mobile-menu" id="mobile-menu">
      <ul class="mobile-nav-links">
        <li><a href="{% url 'markets' %}" {% if request.resolver_match.url_name == 'markets' %}class="active"{% endif %}>{% trans "Markets" %}</a></li>
        <li><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>{% trans "Services" %}</a></li>
        <li><a href="{% url 'projects' %}" {% if request.resolver_match.url_name == 'projects' %}class="active"{% endif %}>{% trans "Projects" %}</a></li>
        <li><a href="{% url 'insights' %}" {% if request.resolver_match.url_name == 'insights' %}class="active"{% endif %}>{% trans "Insights" %}</a></li>
        <li><a href="{% url 'about' %}" {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>{% trans "About" %}</a></li>
        <li><a href="{% url 'careers' %}" {% if request.resolver_match.url_name == 'careers' %}class="active"{% endif %}>{% trans "Careers" %}</a></li>
        <li><a href="{% url 'news' %}" {% if request.resolver_match.url_name == 'news' %}class="active"{% endif %}>{% trans "News" %}</a></li>
        <li><a href="{% url 'contact' %}" {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>{% trans "Contact" %}</a></li>
      </ul>
      <div class="mobile-search">
        <form action="{% url 'search' %}" method="get">
          <input type="text" name="q" placeholder="{% trans 'Search' %}..." />
          <button type="submit">{% trans "Search" %}</button>
        </form>
      </div>
    </div>

    <!-- Main content wrapper so footer can be pushed to the bottom -->
    <main class="site-main">
      <!-- Use the same results-style in-flow search bar as the search results page -->
  <div id="search-bar" class="results-search-wrapper navbar-results-search search-bar full-bleed">
        <form action="{% url 'search' %}" method="get" class="results-search-form">
          <div class="results-search-bar">
            <button type="submit" class="results-search-submit" aria-label="Submit search">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none">
                <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2"/>
                <line x1="16.5" y1="16.5" x2="21" y2="21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <input type="text" name="q" placeholder="{% trans 'search ABOD' %}" aria-label="Search ABOD" />
            <button type="button" class="results-search-clear" aria-label="Clear search">×</button>
          </div>
        </form>
      </div>

      <div class="tagline-below-navbar" id="dynamic-tagline">
        {% trans "We are making innovation sustainable" %}
      </div>

      <!-- Large rounded rectangle with image -->
      <div class="large-rounded-rectangle slide-up">
        <img
          src="{% static 'main/img/hero.jpg' %}"
          alt="Showcase"
          class="rectangle-image"
        />
      </div>

      <h2 class="below-rectangle-header slide-up">
        {% trans "Engineering for people and the planet" %}
      </h2>
      <p class="below-rectangle-subtext slide-up">
        {% trans "Our experts are leading the way" %}
      </p>


      <!-- 4 Image Cards -->
      <div class="four-image-cards slide-up">
        <div class="card-container">
          <a href="{% url 'service_detail' 'Architecture-and-Design' %}">
          <div class="image-card">
            <img src="{% static 'main/img/projects/Gardenia.jpg' %}" alt="Urban Development" />
          </div>
          </a>
          <div class="card-link-container">
            <a href="{% url 'services' %}" class="card-link">{% trans "Services" %}</a>
            <div class="card-link-text">
              <p class="card-link-main">{% trans "Creating iconic, user-centric designs" %}</p>
              <p class="card-link-sub">{% trans "Expert architecture and design solutions for diverse projects" %}</p>
            </div>
          </div>
        </div>
        <div class="card-container">
          <a href="{% url 'insights' %}">
          <div class="image-card">
            <img src="{% static 'main/img/1753531971197.jpg' %}" alt="3D Modeling" />
          </div>
          </a>
          <div class="card-link-container">
            <a href="{% url 'insights' %}" class="card-link">{% trans "Issues" %}</a>
            <div class="card-link-text">
              <p class="card-link-main">{% trans "How do you solve tight spaces with smart design and precise engineering" %}</p>
              <p class="card-link-sub">{% trans "we believe complex challenges can be catalysts for better design" %}</p>
            </div>
          </div>
        </div>
        <div class="card-container">
          <a href="{% url 'project_detail' 'the-exchange-apartments' %}">
          <div class="image-card">
            <img src="{% static 'main/img/projects/The Exchange apartments.jpg' %}" alt="Sustainable Architecture" />
          </div>
          </a>
          <div class="card-link-container">
            <a href="{% url 'projects' %}" class="card-link">{% trans "Projects" %}</a>
            <div class="card-link-text">
              <p class="card-link-main">{% trans "The exchange apartments" %}</p>
              <p class="card-link-sub">{% trans "Modern living spaces designed for contemporary urban lifestyles" %}</p>
            </div>
          </div>
        </div>
        <div class="card-container">
          <a href="{% url 'news' %}">
          <div class="image-card">
            <img src="{% static 'main/img/projects/Beach house.1.jpg' %}" alt="Modern Construction" />
          </div>
          </a>
          <div class="card-link-container">
            <a href="{% url 'news' %}" class="card-link">{% trans "News" %}</a>
            <div class="card-link-text">
              <p class="card-link-main">{% trans "ABOD founder along with others win IFC Edge Design Competition" %}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- OUR WORK section -->
      <div class="our-work-section slide-up">
        <h2 class="our-work-header">{% trans "Our Work" %}</h2>
        <a href="/projects/" class="see-projects-button">{% trans "See Projects" %} →</a>
      </div>
      <p class="section-subtext slide-up">
        {% trans "Showcasing our latest projects and achievements in engineering and sustainability." %}
      </p>

      <!-- Work Showcase Cards -->
      <div class="work-showcase slide-up">
        <div class="work-images">
          <img
            src="{% static 'main/img/projects/Gardenia.jpg' %}"
            alt="Gardenia Project"
          />
          <img
            src="{% static 'main/img/projects/private residence tema.jpg' %}"
            alt="Private Residence, Tema"
          />
          <img
            src="{% static 'main/img/projects/The Exchange apartments.jpg' %}"
            alt="The Exchange Apartments"
          />
            <img
              src="{% static 'main/img/projects/Beach house.1.jpg' %}"
              alt="Beach House Project"
            />
        </div>
        <div class="work-texts">
          <div class="work-text">
            <h3>{% trans "Urban Development" %}</h3>
            <p>
              {% trans "Creating sustainable urban spaces that blend innovation with community needs." %}
            </p>
          </div>
          <div class="work-text">
            <h3>{% trans "3d Modeling and Visualisation" %}</h3>
            <p>
              {% trans "Advancing engineering solutions for complex challenges in modern construction." %}
            </p>
          </div>
          <div class="work-text">
            <h3>{% trans "Sustainable Architecture" %}</h3>
            <p>
              {% trans "Designing buildings that harmonize with the environment and future generations." %}
            </p>
          </div>
          <div class="work-text">
            <h3>{% trans "Modern Construction" %}</h3>
            <p>
              {% trans "Implementing cutting-edge techniques for efficient and resilient structures." %}
            </p>
          </div>
        </div>
      </div>

     

      <section class="issues-section">
        <div class="issues-header">
          <div class="header-content">
            <div>
              <h1 class="issues-title">{% trans "Issues" %}</h1>
              <p class="issues-description">
                {% trans "We explore some of the biggest questions facing the built and natural environments." %}
              </p>
            </div>
            <button class="view-more-btn">
              {% trans "View more issues" %}
              <span class="arrow-icon">→</span>
            </button>
          </div>
        </div>

        <div class="issues-content">
          <a href="#" class="issue-card card-orange">
            <img
              src="{% static 'main/img/chisinau-arena-sunset-moldova.jpg' %}"
              alt="City skyline"
              class="card-fill"
            />
            <div class="card-content">
              <span class="card-label">{% trans "Issue" %}</span>
              <h2 class="card-title">
                {% trans "How do we create climate-resilient, energy-efficient buildings?" %}
              </h2>
            </div>
          </a>

          <a href="#" class="issue-card card-red">
            <img
              src="{% static 'main/img/low-angle-red-geometrical-structure-blue-sky.jpg' %}"
              alt="High-speed rail"
              class="card-fill"
            />
            <div class="card-content">
              <span class="card-label">{% trans "Issue" %}</span>
              <h2 class="card-title">
                {% trans "How do we tackle high-end, technically challenging developments?" %}
              </h2>
            </div>
          </a>

          <a href="#" class="issue-card card-green">
            <img
              src="{% static 'main/img/looking-up.jpg' %}"
              alt="Industrial community"
              class="card-fill"
            />
            <div class="card-content">
              <span class="card-label">{% trans "Issue" %}</span>
              <h2 class="card-title">
                {% trans "How do we Prioritize inclusive, user-focused solutions?" %}
              </h2>
            </div>
          </a>
        </div>
      </section>
    </main>

    <!-- Footer: full-bleed red block immediately after Issues section -->
    <footer class="footer-right">
      <div class="container footer-inner">
        <div class="footer-left">
          <h3 class="site-name">ABOD</h3>
          <p class="site-desc">© 2025 ABOD — All rights reserved</p>
          <p class="footer-blurb">
            {% trans "Designing sustainable places and systems. We work across markets to make long-term, people-centred change." %}
          </p>
        </div>

        <div class="footer-right-columns">
          <nav class="footer-col">
            <h4>{% trans "Explore" %}</h4>
            <ul>
              <li><a href="{% url 'markets' %}">{% trans "Markets" %}</a></li>
              <li><a href="{% url 'services' %}">{% trans "Services" %}</a></li>
              <li><a href="{% url 'projects' %}">{% trans "Projects" %}</a></li>
              <li><a href="{% url 'insights' %}">{% trans "Insights" %}</a></li>
            </ul>
          </nav>

          <nav class="footer-col">
            <h4>{% trans "Company" %}</h4>
            <ul>
              <li><a href="{% url 'about' %}">{% trans "About" %}</a></li>
              <li><a href="{% url 'careers' %}">{% trans "Careers" %}</a></li>
              <li><a href="{% url 'news' %}">{% trans "News" %}</a></li>
              <li><a href="{% url 'contact' %}">{% trans "Contact" %}</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <!-- Divider + social icons row -->
      <div class="footer-bottom">
        <div class="container footer-bottom-inner">
          <div class="footer-divider" aria-hidden="true"></div>

          <div class="footer-socials" aria-label="Social links">
            <a href="#" class="social-link" aria-label="LinkedIn">
              <!-- LinkedIn SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M4.98 3.5C4.98 4.60457 4.09 5.5 2.98 5.5C1.87 5.5 1 4.60457 1 3.5C1 2.39543 1.87 1.5 2.98 1.5C4.09 1.5 4.98 2.39543 4.98 3.5Z"
                  fill="currentColor"
                />
                <path d="M1.5 8.5H4.5V22H1.5V8.5Z" fill="currentColor" />
                <path
                  d="M8.5 8.5H11.3V10.2H11.3C11.8 9.25 13.1 8.22 15.4 8.22C19.9 8.22 20.5 10.9 20.5 14.6V22H17.5V15.7C17.5 13.7 17.4 11.2 14.2 11.2C11 11.2 10.6 13.5 10.6 15.6V22H7.6V8.5H8.5Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <!-- Twitter SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M22 5.92C21.09 6.25 20.13 6.47 19.13 6.56C20.15 6 20.92 5.07 21.28 3.94C20.31 4.46 19.25 4.84 18.12 5.03C17.2 4.06 15.92 3.44 14.5 3.44C11.9 3.44 9.8 5.54 9.8 8.14C9.8 8.47 9.83 8.78 9.9 9.08C6.49 8.92 3.48 7.19 1.67 4.71C1.25 5.4 1 6.19 1 7.04C1 8.62 1.84 9.99 3.11 10.78C2.28 10.76 1.5 10.54 0.8 10.17C0.8 10.19 0.8 10.22 0.8 10.24C0.8 12.46 2.32 14.35 4.36 14.86C3.58 15.08 2.76 15.16 1.91 15.06C2.63 16.9 4.28 18.25 6.22 18.29C4.6 19.55 2.57 20.32 0.35 20.32C-0.05 20.32 -0.44 20.3 -0.82 20.25C1.11 21.57 3.35 22.33 5.78 22.33C14.49 22.33 18.53 14.18 18.53 8.69C18.53 8.51 18.53 8.33 18.52 8.16C19.5 7.52 20.33 6.72 21 5.8L22 5.92Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Instagram">
              <!-- Instagram SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M7 2C4.24 2 2 4.24 2 7V17C2 19.76 4.24 22 7 22H17C19.76 22 22 19.76 22 17V7C22 4.24 19.76 2 17 2H7ZM12 7.5C14.49 7.5 16.5 9.51 16.5 12C16.5 14.49 14.49 16.5 12 16.5C9.51 16.5 7.5 14.49 7.5 12C7.5 9.51 9.51 7.5 12 7.5ZM18.5 6.1C18.5 6.66 18.06 7.1 17.5 7.1C16.94 7.1 16.5 6.66 16.5 6.1C16.5 5.54 16.94 5.1 17.5 5.1C18.06 5.1 18.5 5.54 18.5 6.1Z"
                  fill="currentColor"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      const taglines = [
        "{% trans 'We are making innovation sustainable' %}",
        "{% trans 'We are designing structures for life' %}",
        "{% trans 'We are engineering the change we want to see' %}",
      ];

      function animateTaglineChange(newText) {
        const taglineEl = document.getElementById("dynamic-tagline");
        // Animate out (move up and fade out)
        taglineEl.style.transition = "transform 0.3s, opacity 0.3s";
        taglineEl.style.transform = "translateY(-40px)";
        taglineEl.style.opacity = "0";
        setTimeout(() => {
          taglineEl.textContent = newText;
          // Animate in (drop down and fade in)
          taglineEl.style.transition = "none";
          taglineEl.style.transform = "translateY(40px)";
          setTimeout(() => {
            taglineEl.style.transition =
              "transform 0.4s cubic-bezier(.23,1.01,.32,1), opacity 0.4s";
            taglineEl.style.transform = "translateY(0)";
            taglineEl.style.opacity = "1";
          }, 10);
        }, 300);
      }

      document.addEventListener("DOMContentLoaded", function () {
        const taglineEl = document.getElementById("dynamic-tagline");
        // Pick a random tagline different from the default
        let current = taglineEl.textContent.trim();
        let options = taglines.filter((t) => t !== current);
        let newTagline = options[Math.floor(Math.random() * options.length)];
        animateTaglineChange(newTagline);

        // Optional: animate on logo click if you want instant change without reload
        document
          .querySelector(".navbar-logo a")
          .addEventListener("click", function (e) {
            if (window.location.pathname === "/") {
              e.preventDefault();
              let options = taglines.filter(
                (t) => t !== taglineEl.textContent.trim()
              );
              let newTagline =
                options[Math.floor(Math.random() * options.length)];
              animateTaglineChange(newTagline);
            }
          });

        // Search icon click is handled globally by main/site-search.js
        // (Removed the inline handler to avoid duplicate/timing conflicts.)

        // Language dropdown toggle
        const langToggle = document.getElementById("lang-toggle");
        const langMenu = document.getElementById("lang-menu");
        if (langToggle && langMenu) {
          langToggle.addEventListener("click", function (e) {
            e.preventDefault();
            langMenu.classList.toggle("show");
          });
          document.addEventListener("click", function (e) {
            if (
              !langToggle.contains(e.target) &&
              !langMenu.contains(e.target)
            ) {
              langMenu.classList.remove("show");
            }
          });
        }

        // Mobile language dropdown toggle
        const mobileLangToggle = document.getElementById('mobile-menu-lang-toggle');
        const mobileLangMenu = document.getElementById('mobile-menu-lang-menu');
        if (mobileLangToggle && mobileLangMenu) {
          mobileLangToggle.addEventListener('click', function(e) {
            e.preventDefault();
            mobileLangMenu.classList.toggle('show');
          });
          document.addEventListener('click', function(e) {
            if (!mobileLangToggle.contains(e.target) && !mobileLangMenu.contains(e.target)) {
              mobileLangMenu.classList.remove('show');
            }
          });
        }

        // Work showcase hover animation
        const workImages = document.querySelectorAll(".work-images img");
        const workTexts = document.querySelectorAll(".work-text");
        workImages.forEach((img, index) => {
          img.addEventListener("mouseenter", () => {
            workTexts[index].classList.add("animate");
          });
          img.addEventListener("mouseleave", () => {
            workTexts[index].classList.remove("animate");
          });
        });

        // Staff showcase hover animation
        const staffImages = document.querySelectorAll(".staff-images img");
        const staffTexts = document.querySelectorAll(".staff-text");
        staffImages.forEach((img, index) => {
          img.addEventListener("mouseenter", () => {
            staffTexts[index].classList.add("animate");
          });
          img.addEventListener("mouseleave", () => {
            staffTexts[index].classList.remove("animate");
          });
        });

        // Scroll animation observer
        const observerOptions = {
          threshold: 0.1,
          rootMargin: "0px 0px -50px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("visible");
            }
          });
        }, observerOptions);

        // Observe all slide-up elements
        document.querySelectorAll(".slide-up").forEach((el) => {
          observer.observe(el);
        });

        // mobile menu behavior is centralized in main/site-search.js
      });
    </script>
    <script src="{% static 'main/site-search.js' %}"></script>
    <script>
      // Card text fade-in on horizontal scroll for mobile
      document.addEventListener('DOMContentLoaded', function() {
        // Get all the image cards and text containers
        const cards = document.querySelectorAll('.four-image-cards .image-card');
        const textContainers = document.querySelectorAll('.four-image-cards .card-link-container');
        
        // Create Intersection Observer
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            // Find the index of the current card
            const cardIndex = Array.from(cards).indexOf(entry.target);
            
            if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
              // Card is in view - fade in corresponding text
              if (textContainers[cardIndex]) {
                textContainers[cardIndex].classList.add('fade-in');
                textContainers[cardIndex].classList.remove('fade-out');
              }
            } else {
              // Card is out of view - fade out corresponding text
              if (textContainers[cardIndex]) {
                textContainers[cardIndex].classList.add('fade-out');
                textContainers[cardIndex].classList.remove('fade-in');
              }
            }
          });
        }, {
          root: null, // Use viewport as root for better mobile horizontal scroll detection
          threshold: 0.5, // Trigger when 50% of card is visible
          rootMargin: '0px'
        });
        
        // Observe each card
        cards.forEach(card => {
          observer.observe(card);
        });
      });
    </script>

    <!-- Cookie Consent Banner -->
    <div id="cookie-consent-banner" class="cookie-consent-banner">
      <div class="cookie-consent-content">
        <div class="cookie-consent-text">
          <p><strong>We use cookies</strong> to enhance your browsing experience, serve personalized content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies.</p>
        </div>
        <div class="cookie-consent-buttons">
          <button id="accept-cookies" class="cookie-btn cookie-btn-accept">Accept All</button>
          <button id="reject-cookies" class="cookie-btn cookie-btn-reject">Reject All</button>
          <button id="customize-cookies" class="cookie-btn cookie-btn-customize">Customize</button>
        </div>
      </div>
    </div>

    <!-- Cookie Consent JavaScript -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const banner = document.getElementById('cookie-consent-banner');
        const acceptBtn = document.getElementById('accept-cookies');
        const rejectBtn = document.getElementById('reject-cookies');
        const customizeBtn = document.getElementById('customize-cookies');

        // Check if user has already made a choice
        const cookieConsent = localStorage.getItem('cookie-consent');
        if (cookieConsent) {
          banner.style.display = 'none';
          return;
        }

        // Show banner
        banner.style.display = 'block';

        // Accept all cookies
        acceptBtn.addEventListener('click', function() {
          localStorage.setItem('cookie-consent', 'accepted');
          localStorage.setItem('analytics-cookies', 'true');
          localStorage.setItem('marketing-cookies', 'true');
          banner.style.display = 'none';
          // Enable analytics/marketing cookies here if needed
          console.log('All cookies accepted');
        });

        // Reject all cookies
        rejectBtn.addEventListener('click', function() {
          localStorage.setItem('cookie-consent', 'rejected');
          localStorage.setItem('analytics-cookies', 'false');
          localStorage.setItem('marketing-cookies', 'false');
          banner.style.display = 'none';
          // Disable analytics/marketing cookies here if needed
          console.log('All cookies rejected');
        });

        // Customize cookies (placeholder for future implementation)
        customizeBtn.addEventListener('click', function() {
          // For now, just accept essential cookies
          localStorage.setItem('cookie-consent', 'customized');
          localStorage.setItem('analytics-cookies', 'false');
          localStorage.setItem('marketing-cookies', 'false');
          banner.style.display = 'none';
          console.log('Essential cookies only');
        });
      });
    </script>
  </body>
</html>
