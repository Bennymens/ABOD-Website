{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  {% if page_title %}
  <title>{{ page_title }} — ABOD</title>
  {% else %}
  <title>Insights — ABOD</title>
  {% endif %}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'main/style.css' %}" />
    <style>
      .mobile-controls {
        display: none;
      }
      @media (max-width: 768px) {
        .navbar {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .navbar-left-group {
          display: flex;
          align-items: center;
          gap: 10px;
        }
        .navbar-center, .navbar-right {
          display: none;
        }
        .hamburger {
          display: flex;
          position: static !important;
          margin-left: auto;
        }
        .mobile-controls {
          display: flex;
          align-items: center;
          gap: 15px;
          margin-left: auto;
        }
        .mobile-language {
          position: relative;
        }
        .mobile-language .icon-link {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 30px;
          height: 30px;
          border-radius: 50%;
          background-color: #f0f0f0;
          transition: background-color 0.2s;
        }
        .mobile-language .icon-link:hover {
          background-color: #e0e0e0;
        }
        .mobile-language .icon-link svg {
          width: 18px;
          height: 18px;
          stroke: #333;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-left-group">
        <div
          class="navbar-section navbar-logo"
          style="display: flex; align-items: center; gap: 18px"
        >
          <a href="{% url 'home' %}">
            <img
              src="{% static 'main/img/logo.jpg' %}"
              alt="Company Logo"
              style="height: 40px"
            />
          </a>
        </div>
        <ul class="navbar-section navbar-center">
          <li><a href="{% url 'markets' %}" {% if request.resolver_match.url_name == 'markets' %}class="active"{% endif %}>Markets</a></li>
          <li><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>Services</a></li>
          <li><a href="{% url 'projects' %}" {% if request.resolver_match.url_name == 'projects' %}class="active"{% endif %}>Projects</a></li>
          <li><a href="{% url 'insights' %}" {% if request.resolver_match.url_name == 'insights' %}class="active"{% endif %}>Insights</a></li>
        </ul>
      </div>
      <ul class="navbar-section navbar-right">
        <li><a href="{% url 'about' %}" {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>About</a></li>
        <li><a href="{% url 'careers' %}" {% if request.resolver_match.url_name == 'careers' %}class="active"{% endif %}>Careers</a></li>
        <li><a href="{% url 'news' %}" {% if request.resolver_match.url_name == 'news' %}class="active"{% endif %}>News</a></li>
        <li><a href="{% url 'contact' %}" {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>Contact</a></li>
        <li class="language-dropdown">
          <a href="#" title="Language" class="icon-link" id="lang-toggle">
            <!-- Globe SVG icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle cx="12" cy="12" r="10" stroke="#333" stroke-width="2" />
              <ellipse
                cx="12"
                cy="12"
                rx="4"
                ry="10"
                stroke="#333"
                stroke-width="2"
              />
              <line
                x1="2"
                y1="12"
                x2="22"
                y2="12"
                stroke="#333"
                stroke-width="2"
              />
            </svg>
          </a>
          <ul class="lang-menu" id="lang-menu">
            <li><a href="{% url 'set_language' %}?language=en&next={{ request.get_full_path }}">English</a></li>
            <li><a href="{% url 'set_language' %}?language=fr&next={{ request.get_full_path }}">French</a></li>
            <li><a href="{% url 'set_language' %}?language=de&next={{ request.get_full_path }}">German</a></li>
          </ul>
        </li>
        <li>
          <a href="#" title="Search" class="icon-link">
            <!-- Magnifying glass SVG icon -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle cx="11" cy="11" r="7" stroke="#333" stroke-width="2" />
              <line
                x1="16.5"
                y1="16.5"
                x2="21"
                y2="21"
                stroke="#333"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </a>
        </li>
      </ul>
      <div class="mobile-controls">
        <div class="mobile-language">
          <a href="#" class="icon-link" id="mobile-menu-lang-toggle">
            <!-- Globe SVG icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
              <ellipse cx="12" cy="12" rx="4" ry="10" stroke="currentColor" stroke-width="2"/>
              <line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2"/>
            </svg>
          </a>
          <ul class="lang-menu" id="mobile-menu-lang-menu">
            <li><a href="{% url 'set_language' %}?language=en&next={{ request.get_full_path }}">English</a></li>
            <li><a href="{% url 'set_language' %}?language=fr&next={{ request.get_full_path }}">French</a></li>
            <li><a href="{% url 'set_language' %}?language=de&next={{ request.get_full_path }}">German</a></li>
          </ul>
        </div>
        <div class="hamburger" id="hamburger">
          <span></span><span></span><span></span>
        </div>
      </div>
    </nav>

  <!-- Mobile menu -->
  <main class="site-main">
  <div class="mobile-menu" id="mobile-menu">
      <ul class="mobile-nav-links">
        <li><a href="{% url 'markets' %}" {% if request.resolver_match.url_name == 'markets' %}class="active"{% endif %}>Markets</a></li>
        <li><a href="{% url 'services' %}" {% if request.resolver_match.url_name == 'services' %}class="active"{% endif %}>Services</a></li>
        <li><a href="{% url 'projects' %}" {% if request.resolver_match.url_name == 'projects' %}class="active"{% endif %}>Projects</a></li>
        <li><a href="{% url 'insights' %}" {% if request.resolver_match.url_name == 'insights' %}class="active"{% endif %}>Insights</a></li>
        <li><a href="{% url 'about' %}" {% if request.resolver_match.url_name == 'about' %}class="active"{% endif %}>About</a></li>
        <li><a href="{% url 'careers' %}" {% if request.resolver_match.url_name == 'careers' %}class="active"{% endif %}>Careers</a></li>
        <li><a href="{% url 'news' %}" {% if request.resolver_match.url_name == 'news' %}class="active"{% endif %}>News</a></li>
        <li><a href="{% url 'contact' %}" {% if request.resolver_match.url_name == 'contact' %}class="active"{% endif %}>Contact</a></li>
      </ul>
      <div class="mobile-search">
        <form action="{% url 'search' %}" method="get">
          <input type="text" name="q" placeholder="Search..." />
          <button type="submit">Search</button>
        </form>
      </div>
    </div>

  </main>
  <!-- Footer: full-bleed red block after Issues section -->
  <footer class="footer-right">
      <div class="container footer-inner">
        <div class="footer-left">
          <h3 class="site-name">ABOD</h3>
          <p class="site-desc">© 2025 ABOD — All rights reserved</p>
          <p class="footer-blurb">
            Designing sustainable places and systems. We work across markets to
            make long-term, people-centred change.
          </p>
        </div>

        <div class="footer-right-columns">
          <nav class="footer-col">
            <h4>Explore</h4>
            <ul>
              <li><a href="{% url 'markets' %}">Markets</a></li>
              <li><a href="{% url 'services' %}">Services</a></li>
              <li><a href="{% url 'projects' %}">Projects</a></li>
              <li><a href="{% url 'insights' %}">Insights</a></li>
            </ul>
          </nav>

          <nav class="footer-col">
            <h4>Company</h4>
            <ul>
              <li><a href="{% url 'about' %}">About</a></li>
              <li><a href="{% url 'careers' %}">Careers</a></li>
              <li><a href="{% url 'news' %}">News</a></li>
              <li><a href="{% url 'contact' %}">Contact</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <!-- Divider + social icons row -->
      <div class="footer-bottom">
        <div class="container footer-bottom-inner">
          <div class="footer-divider" aria-hidden="true"></div>

          <div class="footer-socials" aria-label="Social links">
            <a href="#" class="social-link" aria-label="LinkedIn">
              <!-- LinkedIn SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M4.98 3.5C4.98 4.60457 4.09 5.5 2.98 5.5C1.87 5.5 1 4.60457 1 3.5C1 2.39543 1.87 1.5 2.98 1.5C4.09 1.5 4.98 2.39543 4.98 3.5Z"
                  fill="currentColor"
                />
                <path d="M1.5 8.5H4.5V22H1.5V8.5Z" fill="currentColor" />
                <path
                  d="M8.5 8.5H11.3V10.2H11.3C11.8 9.25 13.1 8.22 15.4 8.22C19.9 8.22 20.5 10.9 20.5 14.6V22H17.5V15.7C17.5 13.7 17.4 11.2 14.2 11.2C11 11.2 10.6 13.5 10.6 15.6V22H7.6V8.5H8.5Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
              <!-- Twitter SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M22 5.92C21.09 6.25 20.13 6.47 19.13 6.56C20.15 6 20.92 5.07 21.28 3.94C20.31 4.46 19.25 4.84 18.12 5.03C17.2 4.06 15.92 3.44 14.5 3.44C11.9 3.44 9.8 5.54 9.8 8.14C9.8 8.47 9.83 8.78 9.9 9.08C6.49 8.92 3.48 7.19 1.67 4.71C1.25 5.4 1 6.19 1 7.04C1 8.62 1.84 9.99 3.11 10.78C2.28 10.76 1.5 10.54 0.8 10.17C0.8 10.19 0.8 10.22 0.8 10.24C0.8 12.46 2.32 14.35 4.36 14.86C3.58 15.08 2.76 15.16 1.91 15.06C2.63 16.9 4.28 18.25 6.22 18.29C4.6 19.55 2.57 20.32 0.35 20.32C-0.05 20.32 -0.44 20.3 -0.82 20.25C1.11 21.57 3.35 22.33 5.78 22.33C14.49 22.33 18.53 14.18 18.53 8.69C18.53 8.51 18.53 8.33 18.52 8.16C19.5 7.52 20.33 6.72 21 5.8L22 5.92Z"
                  fill="currentColor"
                />
              </svg>
            </a>
            <a href="#" class="social-link" aria-label="Instagram">
              <!-- Instagram SVG -->
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M7 2C4.24 2 2 4.24 2 7V17C2 19.76 4.24 22 7 22H17C19.76 22 22 19.76 22 17V7C22 4.24 19.76 2 17 2H7ZM12 7.5C14.49 7.5 16.5 9.51 16.5 12C16.5 14.49 14.49 16.5 12 16.5C9.51 16.5 7.5 14.49 7.5 12C7.5 9.51 9.51 7.5 12 7.5ZM18.5 6.1C18.5 6.66 18.06 7.1 17.5 7.1C16.94 7.1 16.5 6.66 16.5 6.1C16.5 5.54 16.94 5.1 17.5 5.1C18.06 5.1 18.5 5.54 18.5 6.1Z"
                  fill="currentColor"
                />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>
    <script src="{% static 'main/site-search.js' %}"></script>
    <script>
      // Language dropdown toggle
      const langToggle = document.getElementById("lang-toggle");
      const langMenu = document.getElementById("lang-menu");
      if (langToggle && langMenu) {
        langToggle.addEventListener("click", function (e) {
          e.preventDefault();
          langMenu.classList.toggle("show");
        });
        document.addEventListener("click", function (e) {
          if (
            !langToggle.contains(e.target) &&
            !langMenu.contains(e.target)
          ) {
            langMenu.classList.remove("show");
          }
        });
      }

      // Mobile language dropdown toggle
      const mobileLangToggle = document.getElementById('mobile-menu-lang-toggle');
      const mobileLangMenu = document.getElementById('mobile-menu-lang-menu');
      if (mobileLangToggle && mobileLangMenu) {
        mobileLangToggle.addEventListener('click', function(e) {
          e.preventDefault();
          mobileLangMenu.classList.toggle('show');
        });
        document.addEventListener('click', function(e) {
          if (!mobileLangToggle.contains(e.target) && !mobileLangMenu.contains(e.target)) {
            mobileLangMenu.classList.remove('show');
          }
        });
      }
    </script>
  </body>
</html>
